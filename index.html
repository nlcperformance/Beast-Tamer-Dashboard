import React, { useState } from 'react';
import { Calendar, Dumbbell, Activity, ShieldAlert, Clock, ChevronRight, Info, Flame, Moon, Coffee, Anchor, Wrench } from 'lucide-react';

const Dashboard = () => {
  const [activeTab, setActiveTab] = useState('schedule');
  const [selectedDay, setSelectedDay] = useState(null);

  const schedule = {
    Mon: {
      activity: "Strength Session A (Heavy)",
      time: "15:00",
      icon: <Dumbbell className="w-6 h-6 text-orange-500" />,
      details: "Fresh CNS. Heavy loads. 'Fillers' used during rest periods.",
      nutrition: "14:30: Collagen + Vit C",
      notes: "NLC Business Block @ 19:30"
    },
    Tue: {
      activity: "Recovery / NLC",
      time: "All Day",
      icon: <Moon className="w-6 h-6 text-blue-400" />,
      details: "Light movement only. Cook dinner early.",
      nutrition: "Hydration Focus",
      notes: "No training. Protect the knee."
    },
    Wed: {
      activity: "BJJ (Gi) OR The Wrench",
      time: "19:00",
      icon: <Wrench className="w-6 h-6 text-purple-500" />,
      details: "Primary: BJJ Class. Backup: 'Wednesday Wrench' (Hybrid Bulletproofing).",
      nutrition: "Normal",
      notes: "Focus: Rotation & Structural Hygiene."
    },
    Thu: {
      activity: "Strength Session A (Easy Strength)",
      time: "19:30",
      icon: <Dumbbell className="w-6 h-6 text-green-500" />,
      details: "Same lifts as Mon, but stop well before failure.",
      nutrition: "17:45: Carb Heavy Meal",
      notes: "‚ö†Ô∏è Cook dinner BEFORE training."
    },
    Fri: {
      activity: "Rest / Family",
      time: "All Day",
      icon: <Moon className="w-6 h-6 text-blue-400" />,
      details: "Date night / Family time.",
      nutrition: "Relaxed",
      notes: "Total off switch."
    },
    Sat: {
      activity: "BJJ (Gi)",
      time: "10:30",
      icon: <Activity className="w-6 h-6 text-purple-500" />,
      details: "Harder rolls if HRV permits.",
      nutrition: "Pre-roll carbs",
      notes: "Check grip strength before going."
    },
    Sun: {
      activity: "Strength Session B (Engine)",
      time: "09:00",
      icon: <Flame className="w-6 h-6 text-red-500" />,
      details: "A+A Swings + Get-ups.",
      nutrition: "11:00: Meal Prep",
      notes: "Must pass 'Talk Test' throughout."
    }
  };

  const sessions = {
    A: {
      title: "Session A: Beast & Meniscus (Mon/Thu)",
      focus: "Max Strength + Bulletproofing Fillers",
      exercises: [
        { 
          name: "Weighted Pull-up", 
          protocol: "3 sets x 2 reps", 
          load: "32-36kg (No grind)", 
          filler: "Filler: Tibialis Raises (20 reps) - Protects Ankle/Knee",
          notes: "Maintenance volume." 
        },
        { 
          name: "KB Military Press", 
          protocol: "3-5 sets x 2-3 reps", 
          load: "32kg+ (Micro-load)", 
          filler: "Filler: KB Halo or Band Face Pull (15 reps) - Shoulder Health",
          notes: "Use magnets to bridge gap to 40kg." 
        },
        { 
          name: "Box Pistol Squat", 
          protocol: "3-5 sets x 2 reps", 
          load: "24kg (Left leg focus)", 
          filler: "Filler: TKEs (Band Terminal Knee Ext) - 20 reps/side",
          notes: "Pause 2s on box. NO bounce. Parallel only." 
        }
      ]
    },
    B: {
      title: "Session B: A+A Engine (Sun)",
      focus: "Alactic Power + Aerobic Recovery",
      exercises: [
        { name: "Heavy Swings (EMOM)", protocol: "EMOM 12-20 mins", load: "32kg or 40kg", filler: "Focus: Nasal Breathing Only", notes: "Odd min: 10L. Even min: 10R." },
        { name: "Turkish Get-up", protocol: "10 mins continuous", load: "Moderate", filler: "Focus: Smooth Transitions", notes: "Alternate sides. Focus on fluidity." }
      ]
    },
    C: {
      title: "Session C: The Wednesday Wrench",
      focus: "Hybrid Bulletproofing (Paul Chek Approved)",
      exercises: [
        { 
          name: "1. Suitcase Carries", 
          protocol: "3 rounds x 40m/side", 
          load: "Heavy (32kg+)", 
          notes: "Targets QL and Grip. Keep spine dead straight." 
        },
        { 
          name: "2. KB Windmill or Triangle", 
          protocol: "3 rounds x 5 reps/side", 
          load: "Light/Moderate", 
          notes: "Targets 'Serape Effect' (Rotation) missed in sagittal lifting." 
        },
        { 
          name: "3. Neck Flexion/Ext (Ball)", 
          protocol: "3 rounds x 30s Hold", 
          load: "Isometric", 
          notes: "Critical for BJJ longevity." 
        },
        { 
          name: "4. Shinbox Flow", 
          protocol: "3 mins continuous", 
          load: "Bodyweight", 
          notes: "Hip internal/external rotation lubricant." 
        }
      ]
    }
  };

  const protocols = [
    {
      title: "ü¶Å The Paul Chek Audit",
      content: "1. Gut-Knee Axis: If the gut is inflamed, the L3 nerve inhibits the knee. Diet is your best knee rehab. 2. Work-In: With high SHBG, you need to generate energy, not just spend it. 3. Rotation: The 'Wrench' adds the rotation missing from heavy lifting.",
      action: "Monitor gut bloat. If bloated, reduce Pistol load."
    },
    {
      title: "üõ°Ô∏è Bulletproofing Logic",
      content: "Do not add extra time at the end of the workout. Perform 'Fillers' during your 3-5 minute rest periods between heavy sets. This improves recovery by flushing blood without fatiguing the CNS.",
      action: "Use the rest periods!"
    },
    {
      title: "ü¶µ Meniscus Protection",
      content: "The bottom 15 degrees of a squat (deep flexion) creates maximum shear force. By using a BOX at parallel, you eliminate this danger zone while still building the VMO and Glute strength needed for the Beast Tamer.",
      action: "Use a box/bench. Pause 2s. Never bounce."
    },
    {
      title: "üìâ SHBG Management",
      content: "Your SHBG is high (85.2), locking up your Test. High cortisol spikes SHBG. You must switch from 'Fight' to 'Rest' immediately after training.",
      action: "Post-workout: 5 mins Legs Up Wall + Physiological Sighs."
    }
  ];

  return (
    <div className="min-h-screen bg-slate-900 text-slate-100 p-4 md:p-8 font-sans">
      <div className="max-w-4xl mx-auto">
        
        {/* Header */}
        <div className="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center border-b border-slate-700 pb-6">
          <div>
            <h1 className="text-3xl font-bold text-orange-500">Beast & Meniscus Protocol</h1>
            <p className="text-slate-400 mt-1">Bespoke Program: Jan 2025 Start</p>
          </div>
          <div className="mt-4 md:mt-0 flex gap-2">
            <span className="bg-slate-800 px-3 py-1 rounded text-sm text-blue-400 border border-blue-900/50">Test: 45+ nmol/L</span>
            <span className="bg-slate-800 px-3 py-1 rounded text-sm text-red-400 border border-red-900/50">SHBG Management</span>
          </div>
        </div>

        {/* Navigation */}
        <div className="flex gap-2 mb-6 overflow-x-auto pb-2">
          {['schedule', 'sessions', 'protocols'].map((tab) => (
            <button
              key={tab}
              onClick={() => { setActiveTab(tab); setSelectedDay(null); }}
              className={`px-6 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${
                activeTab === tab 
                  ? 'bg-orange-600 text-white shadow-lg shadow-orange-900/20' 
                  : 'bg-slate-800 text-slate-400 hover:bg-slate-700'
              }`}
            >
              {tab.charAt(0).toUpperCase() + tab.slice(1)}
            </button>
          ))}
        </div>

        {/* Content Area */}
        <div className="bg-slate-800/50 rounded-xl p-6 border border-slate-700/50 min-h-[400px]">
          
          {/* SCHEDULE VIEW */}
          {activeTab === 'schedule' && (
            <div className="space-y-6">
              <div className="grid grid-cols-2 md:grid-cols-7 gap-2">
                {Object.entries(schedule).map(([day, data]) => (
                  <button
                    key={day}
                    onClick={() => setSelectedDay(day)}
                    className={`p-3 rounded-lg border transition-all text-left relative overflow-hidden ${
                      selectedDay === day 
                        ? 'bg-slate-700 border-orange-500 ring-1 ring-orange-500' 
                        : 'bg-slate-800 border-slate-700 hover:border-slate-600'
                    }`}
                  >
                    <div className="flex justify-between items-start mb-2">
                      <span className="font-bold text-slate-200">{day}</span>
                      {data.icon}
                    </div>
                    <div className="text-xs text-slate-400 truncate">{data.time}</div>
                    <div className="text-xs font-medium text-orange-400 mt-1 truncate">{data.activity.split(' ')[0]}</div>
                  </button>
                ))}
              </div>

              {selectedDay ? (
                <div className="bg-slate-900 rounded-lg p-6 border border-slate-700 animate-in fade-in slide-in-from-top-4 duration-300">
                  <div className="flex items-center gap-4 mb-4">
                    <div className="p-3 bg-slate-800 rounded-lg">
                      {schedule[selectedDay].icon}
                    </div>
                    <div>
                      <h3 className="text-xl font-bold text-white">{schedule[selectedDay].activity}</h3>
                      <p className="text-orange-400 flex items-center gap-2">
                        <Clock className="w-4 h-4" /> {schedule[selectedDay].time}
                      </p>
                    </div>
                  </div>
                  
                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="space-y-3">
                      <div className="text-sm font-semibold text-slate-500 uppercase tracking-wider">Plan</div>
                      <p className="text-slate-200">{schedule[selectedDay].details}</p>
                    </div>
                    <div className="space-y-3">
                      <div className="text-sm font-semibold text-slate-500 uppercase tracking-wider">Key Protocol</div>
                      <div className="flex items-start gap-2 text-sm text-slate-300">
                        <Coffee className="w-4 h-4 text-yellow-500 mt-0.5" />
                        <span>{schedule[selectedDay].nutrition}</span>
                      </div>
                      <div className="flex items-start gap-2 text-sm text-slate-300">
                         <ShieldAlert className="w-4 h-4 text-red-400 mt-0.5" />
                         <span>{schedule[selectedDay].notes}</span>
                      </div>
                    </div>
                  </div>
                </div>
              ) : (
                <div className="text-center text-slate-500 py-12">
                  <Activity className="w-12 h-12 mx-auto mb-3 opacity-20" />
                  <p>Select a day above to view your protocol.</p>
                </div>
              )}
            </div>
          )}

          {/* SESSIONS VIEW */}
          {activeTab === 'sessions' && (
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
              {Object.values(sessions).map((session, idx) => (
                <div key={idx} className="bg-slate-900 rounded-lg p-5 border border-slate-700">
                  <h3 className="text-lg font-bold text-orange-500 mb-1">{session.title}</h3>
                  <p className="text-xs text-slate-400 mb-4 uppercase tracking-wider">{session.focus}</p>
                  <div className="space-y-6">
                    {session.exercises.map((ex, i) => (
                      <div key={i} className="border-l-2 border-slate-700 pl-3">
                        <div className="flex justify-between items-baseline">
                          <span className="font-semibold text-slate-200">{ex.name}</span>
                          <span className="text-sm text-orange-400 font-mono">{ex.protocol}</span>
                        </div>
                        <div className="text-sm text-slate-400 mt-1">{ex.load}</div>
                        {ex.filler && (
                           <div className="mt-2 bg-slate-800 p-2 rounded text-xs text-blue-300 flex gap-2 items-center">
                             <Anchor className="w-3 h-3" />
                             {ex.filler}
                           </div>
                        )}
                        <div className="text-xs text-slate-500 mt-2 italic">{ex.notes}</div>
                      </div>
                    ))}
                  </div>
                </div>
              ))}
            </div>
          )}

          {/* PROTOCOLS VIEW */}
          {activeTab === 'protocols' && (
            <div className="space-y-4">
              {protocols.map((proto, idx) => (
                <div key={idx} className="bg-slate-900 rounded-lg p-5 border border-slate-700 flex gap-4">
                  <div className="hidden md:block p-3 bg-slate-800 h-fit rounded-lg">
                    <Info className="w-6 h-6 text-blue-400" />
                  </div>
                  <div>
                    <h3 className="text-lg font-bold text-white mb-2">{proto.title}</h3>
                    <p className="text-slate-300 text-sm leading-relaxed mb-3">{proto.content}</p>
                    <div className="bg-slate-800/50 p-3 rounded border border-slate-700 text-sm text-orange-200">
                      <span className="font-bold text-orange-500">ACTION:</span> {proto.action}
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}

        </div>
        
        <div className="mt-6 text-center text-xs text-slate-500">
          Generated for NLC Performance ‚Ä¢ Beast Tamer Protocol ‚Ä¢ Jan 2025
        </div>

      </div>
    </div>
  );
};

export default Dashboard;
